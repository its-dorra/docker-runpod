[supervisord]
nodaemon=true

[program:mysql]
command=mysqld_safe
autorestart=true
priority=10

[program:redis]
command=redis-server --requirepass "${REDIS_PASSWORD}"
autorestart=true
priority=20

[program:elasticsearch]
command=/usr/share/elasticsearch/bin/elasticsearch
autorestart=true
priority=30

[program:minio]
command=minio server /data --console-address ":9001"
autorestart=true
priority=40

[program:ragflow]
command=bash -c "python3 -m ragflow.main --config /app/docker/service_conf.yaml.template"
directory=/app
environment=ES_HOST="localhost:9200",MYSQL_HOST="localhost",MYSQL_USER="${MYSQL_USER}",MYSQL_PASSWORD="${MYSQL_PASSWORD}",REDIS_HOST="localhost",MINIO_ENDPOINT="http://localhost:9000"
autorestart=true
priority=50
